# 深入浅出React和Redux学习笔记（五）

## React组建的性能优化

性能优化的方法：

1. 单个React组件的性能优化；
2. 多个React组件的性能优化；
3. 利用reselect提高数据选取的性能；

重点关注的是，React组件的渲染性能优化。

## 1.单个React组件的性能优化

React利用Virtual DOM来提高渲染性能，虽然每次页面更新都是对组件的重新渲染，但并不是将之前渲染的内容全部抛弃重来，借助Virtual DOM,React能够计算出DOM树最少的修改，这就是React在默认情况下都渲染很迅速的秘籍。

### 1.1发现浪费的渲染时间

发现浪费的渲染时间，需要在Chrome浏览器中安装React Perf扩展。

注意：这里的浪费是计算Virtual DOM的浪费，而不是访问DOM树 的浪费。

### 1.2性能优化的时机

“过早的优化是万恶之源” - 高德纳 《计算机编程艺术》

表面上的意思是，除非性能出了问题，不然就不要花时间去优化性能问题。

真正上的意思是，“我们应该忘记忽略很小的性能优化，可以说97%的情况下，过早的优化是万恶之源，而我们应该关心对性能影响最关键的那另外的3%的代码” - 高德纳。

高德纳认为，不要将性能优化的经历浪费在对整体性能提高不大的代码，而是对性能有关键的影响的部分，优化并不嫌早。

“过早的优化”：没有任何量化证据的情况下，开发者对性能优化的猜测，并没有可测量的性能指标，就完全不知道当前的性能瓶颈在何处，完成优化之后，也无法知道性能优化是否达到了预期的结果。

### 1.3React-Redux的shouldComponentUpdate实现

shouldComponentUpdate的默认实现是一种兜底的保险方法。但是要达到更好的性能，有必要定义shouldComponentUpdate函数。

React-Redux通过提供更好的shouldComponentUpdate的实现方式：

在对比prop和上次渲染所用prop方面上看，依然使用的是“浅层比较”(shallow compare)。可以简单的理解为，JS 的“===”操作符。

想让React-Redux认为前后的对象prop是相同的，就必须保证prop指向的JS对象是一致的。

## 2.多个React组件的性能优化

## 3.利用reselect提高数据选取的性能



